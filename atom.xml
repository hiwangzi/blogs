<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>WANG!</title>
  
  <subtitle>道且长，衣衫薄</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://hiwangzi.com/"/>
  <updated>2018-04-07T08:32:54.349Z</updated>
  <id>http://hiwangzi.com/</id>
  
  <author>
    <name>zill057</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>安装Arch中遇到的Broadcom b43(BCM43228)网卡问题</title>
    <link href="http://hiwangzi.com/2018/03/25/arch-install-with-bcm/"/>
    <id>http://hiwangzi.com/2018/03/25/arch-install-with-bcm/</id>
    <published>2018-03-25T10:35:00.000Z</published>
    <updated>2018-04-07T08:32:54.349Z</updated>
    
    <content type="html"><![CDATA[<p>之前按照<a href="https://www.viseator.com/2017/05/17/arch_install/" target="_blank" rel="noopener">以官方Wiki的方式安装ArchLinux</a>，并结合<a href="https://wiki.archlinux.org/index.php/installation_guide" target="_blank" rel="noopener">官方文档</a>，成功的在VirtualBox环境下安装好了Arch。虚拟机限于内存、显卡等，体验不够好，因此今天准备在旧笔记本实机安装。在第一步联网过程中，就遇到了阻碍，特此记录。</p><h2 id="查看网卡类型"><a href="#查看网卡类型" class="headerlink" title="查看网卡类型"></a>查看网卡类型</h2><p>在之前的虚拟机环境下，采用NAT模式联网，网卡自动识别并加载，只需要执行 <code>dhcpcd</code> 获取 IP 后即可成功连接互联网。但这次，系统并不能自动驱动硬件工作，所以我们需要先检查一下网卡类型。</p><ul><li><p>执行 <code>lspci -k</code> 查看 <code>Network controller</code> 这一项。</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">02:00.0 Network controller: Broadcom Limited BCM43228 802.11a/b/g/n</span><br><span class="line">Subsystem: Foxconn International, Inc. BCM43228 802.11a/b/g/n</span><br><span class="line">Kernel driver in use: bcma-pci-bridge</span><br><span class="line">Kernel moudles: bcma</span><br></pre></td></tr></table></figure></li><li><p>检查 <code>ip link</code> 输出结果中有没有 <code>wlan0</code> 或 <code>wlps21</code> 一类的设备。如果有的话，只需要执行 <code>ip link set &lt;设备名&gt; up</code> 即可，无需再额外安装驱动程序。</p></li><li><p>如果没有，即需要检查内核的固件信息 <code>dmesg | grep firmware</code>，获得更多提示</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b43-phy0 ERROR: You must go to http://wireless.kernel.or/en/users/Drivers/b43#devicefirmware and download the correct firmware for this driver version.</span><br></pre></td></tr></table></figure><ul><li>如果没有这样的信息，可以先尝试执行 <code>iwlwifi</code> 一类命令，然后查找对应的错误信息 <code>dmesg | grep iwlwifi</code></li><li>获得提示信息后，例如上面的网站，可以访问后，获得进一步的信息。此处需要执行 <code>lspci -nn -d 14e4:</code> 获得详细的硬件型号，并下载<a href="https://aur.archlinux.org/packages/b43-firmware/" target="_blank" rel="noopener">对应的驱动</a>。关于博通无线网卡，可以查阅 <a href="https://wiki.archlinux.org/index.php/Broadcom_wireless_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87" target="_blank" rel="noopener">Wiki 页面</a>)获得更多信息。</li></ul></li></ul><h2 id="下载并安装驱动"><a href="#下载并安装驱动" class="headerlink" title="下载并安装驱动"></a>下载并安装驱动</h2><ul><li>没网络怎么下载 ❓ 可以下载至安装U盘的根目录，安装时切换至 <code>/run/archiso/bootmnt</code>，即可看到下载的内容，将其拷贝至 <code>/root</code> 解压。</li><li>怎么安装驱动 ❓ <a href="https://www.cnblogs.com/clouds008/p/7460928.html" target="_blank" rel="noopener">更多参考</a> 在上一步解压完成后，会得到一个 <code>.o</code> 结尾的问题，执行 <code>b43-fwcutter -w /lib/firmware xxx.o</code> 即可完成安装。</li><li><p>安装后怎么启动 ❓ <a href="http://linuxwireless.sipsolutions.net/en/users/Drivers/b43/" target="_blank" rel="noopener">更多参考</a> 卸载之前的驱动，然后再加载新安装的驱动。</p><ul><li><p>卸载旧驱动（如果你知道你正在使用的驱动名称的话，只需执行对应的命令即可）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">modprobe -r b43 bcma</span><br><span class="line">modprobe -r brcmsmac bcma</span><br><span class="line">modprobe -r wl</span><br></pre></td></tr></table></figure></li><li><p>加载新驱动（只需执行对应的驱动命令即可）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">modprobe b43</span><br><span class="line">modprobe brcmsmac</span><br><span class="line">modprobe wl</span><br></pre></td></tr></table></figure></li></ul></li><li><p>安装完成后可以通过 <code>ip link</code> 查看是否有新增加的网络接口信息。</p></li></ul><h2 id="安装完成后的联网过程"><a href="#安装完成后的联网过程" class="headerlink" title="安装完成后的联网过程"></a>安装完成后的联网过程</h2><blockquote><p>此部分内容主要参考了 <a href="https://linux.cn/article-4015-1.html" target="_blank" rel="noopener">在命令行中管理 Wifi 连接</a></p></blockquote><ul><li>通过 <code>ip link set &lt;设备名&gt; up</code> 启动接口服务。</li><li>可以通过 <code>iw dev &lt;设备名&gt; scan | less</code> 扫描附近网络。</li><li><p>联网</p><ul><li><p>无加密网络</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iw dev &lt;设备名&gt; connect &lt;网络 SSID&gt;</span><br></pre></td></tr></table></figure></li><li><p>WEP 加密</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iw dev &lt;设备名&gt; connect &lt;网络 SSID&gt; key 0:&lt;WEP密钥&gt;</span><br></pre></td></tr></table></figure></li><li><p>WPA/WPA2 加密（现在最常见）</p><ul><li><p><code>vim /etc/wpasupplicant/wpa_supplicant.conf</code> 编辑文件（其实放在别的位置也行），增加如下内容（注意包含引号）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">network=&#123;</span><br><span class="line">    ssid=&quot;&lt;网络 SSID&gt;&quot;</span><br><span class="line">    psk=&quot;&lt;密码&gt;&quot;</span><br><span class="line">    priority=1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><code>wpa_supplicant -i &lt;设备名&gt; -c /etc/wpa_supplicant/wpa_supplicant.conf &amp;</code> 后台启动网络连接</p></li></ul></li></ul></li><li>获取 IP：<code>dhcpcd &lt;设备名&gt;</code> 自动获取 IP 地址</li><li>测试网络：<code>ping hiwangzi.com</code> 测试网络连接是否正常~</li></ul>]]></content>
    
    <summary type="html">
    
      之前按照《以官方Wiki的方式安装ArchLinux》，并结合官方文档，成功的在VirtualBox环境下安装好了Arch。虚拟机限于内存、显卡等，体验不够好，因此今天准备在旧笔记本实机安装。在第一步联网过程中，就遇到了阻碍，特此记录。
    
    </summary>
    
    
      <category term="Linux" scheme="http://hiwangzi.com/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>什么是 Unix</title>
    <link href="http://hiwangzi.com/2018/02/03/what-is-unix/"/>
    <id>http://hiwangzi.com/2018/02/03/what-is-unix/</id>
    <published>2018-02-03T08:25:00.000Z</published>
    <updated>2018-04-07T08:36:08.986Z</updated>
    
    <content type="html"><![CDATA[<h2 id="关于内核"><a href="#关于内核" class="headerlink" title="关于内核"></a>关于内核</h2><ul><li>当计算机启动时，计算机要经历一系列动作，这些动作构成了引导过程。引导过程的最后一个动作是启动一个非常复杂的程序，该程序就被称为<strong>内核（Kernel）</strong>。</li><li>内核的作用是控制计算机，提供基础服务，是<a href="http://www.cnblogs.com/hiwangzi/p/7619823.html#about-os" target="_blank" rel="noopener">操作系统</a>的核心。</li><li>内核有许多种类型，但基本可以分为两大类：<ul><li>单内核：一个庞大的程序自身可以完成所有的事</li><li>微内核：一个非常小的程序只执行最基本的任务，其余通过调用其他程序（称为服务器(server)）实现</li></ul></li><li>内核的使用：<ul><li>大多数 Unix 系统使用的是某种类型的单内核，一些 Unix （例如 OS X，Minix）使用微内核。</li><li>Linux 是单内核。</li><li>补：Linus 阅读了 Andrew Tanenbaum 的《Operating System: Design and Implementation》，该书解释了 Minix 的设计原则。Linus 选择使用单内核设计 Linux，而 Andrew Tanenbaum 设计的 Minix 使用的是微内核。在 Linux 开始引起注意后不久，Tanenbaum 公开批判这种设计决策，直到今天，Tanenbaum 仍然在批评这种单内核设计。</li></ul></li></ul><h2 id="关于-Unix"><a href="#关于-Unix" class="headerlink" title="关于 Unix"></a>关于 Unix</h2><ul><li>Unix = Unix 内核 + Unix 实用工具</li><li>Unix 过去是属于 AT&amp;T 的商标（必须为大写 UNIX，以下的全大写均指 AT&amp;T 公司的 Unix）</li><li>现在可以理解为指代任何 “类Unix” 系统</li><li>关于 “类Unix” 的两种理解：<ul><li>如果操作系统既包含一个 Unix 内核以及一些 Unix 实用工具，又可以运行能够在其他 Unix 操作系统上运行的程序，那么它就是 Unix 系统</li><li>如果理解 Unix 的人说这个系统是 Unix，那么它就是 Unix</li></ul></li></ul><h2 id="Unix-的历史"><a href="#Unix-的历史" class="headerlink" title="Unix 的历史"></a>Unix 的历史</h2><ul><li>20世纪70年代的 Unix：由贝尔实验室转向 Berkeley<ul><li>1974年，Berkeley 的 Bob Fabry 教授获得了一份 UNIX 副本，该校的学生们开始增强该系统。</li><li>1977年，Bill Joy 装配了第一版的 Berkeley Unix，被称为 BSD(Berkeley Software Distribution)</li><li>1979年，AT&amp;T 公司宣布将 UNIX 作为一个商品销售（UNIX System III(“Three”), UNIX System V(“Five”)）</li><li>1979年，所有的 BSD 用户都被要求购买一个 AT&amp;T 公司的许可证，并且之后每年都在提高许可证的价格。因此，BSD 程序员越来越难以忍受 AT&amp;T 公司的束缚。</li></ul></li><li>20世纪80年代的 Unix：BSD 与 System V<ul><li>截止至1980年，美国东海岸 Unix（AT&amp;T 的 UNIX）和西海岸的 Unix（BSD）平分秋色，都发展很快。</li><li>此时的 UNIX：AT&amp;T 目标是使 UNIX 成为一个成功的商业产品，只面向能够为许可证付大量金钱的公司。1982年，发行了 UNIX System III。1983年，发行了 System V，到年末，System V 安装了 45,000 份。1984年，System V Release 2(SVR2) 发行时，大约安装了 100,000 份。</li><li>此时的 BSD：1980年，Berkeley 的 Bob Fabry 教授接到美国国防部高级研究计划局（DARPA，补：1972年前，该机构名为 ARPA，Internet的祖先 Arpanet 也由该机构创造）的一个大合同。Fabry 随后建立了 CSRG(Computer System Research Group) ，该小组一直延续到 1994 年，且在这段时间，对 BSD 和 Unix 在全球的发展产生了重要影响。随后该小组发布的 Unix 版本都受到了学术界与研究社区的高度关注。1982年，4.1BSD支持TCP/IP，成为 Internet 的基础。1983年，4.2BSD发布，全球已有1000份安装。</li><li>到 1985 年，Unix 流派就是以上两类。其他形式的 Unix 也都派生自以上两类。</li><li>在20世纪80年代末，Unix世界的两大特征：Unix 总体的快速增长和不同类型 Unix 的增殖扩散。</li></ul></li><li>AT&amp;T 公司的限制<ul><li>1979年，AT&amp;T不允许其公司之外的人查看 UNIX 的源代码</li><li>1984年之一：x86 架构的 Minix 操作系统开始编写并于两年后诞生</li><li>1984年之二：GNU 计划与 FSF(Free Software Foundation) 基金会的成立</li><li>1991年：芬兰大学生 Linux Torvalds 发布了一则简讯，Linux 世界自此开始，随后发展出了数百个发行版</li><li>1992年：Bill Jolitz 替换了最后的 6 个 AT&amp;T 公司的内核文件，发行了一个完全与 AT&amp;T 无关的 Unix：386/BSD。后来更名为 FreeBSD。后来衍生出了 NetBSD(可移植到许多种类的计算机)，OpenBSD(关注安全与密码学)。</li></ul></li></ul><h2 id="为何-Linux-成为了更加流行的-Unix？"><a href="#为何-Linux-成为了更加流行的-Unix？" class="headerlink" title="为何 Linux 成为了更加流行的 Unix？"></a>为何 Linux 成为了更加流行的 Unix？</h2><ul><li>Linux 是基于 GNU GPL 许可发行的，而 GPL 禁止任何人使用 Linux 创建及发行专有系统。而 BSD 许可证远没有 GPL 严格，在 BSD 许可证之下，允许使用部分 BSD 创建新产品而不共享新产品，因此这种情况下，其他人无法从新产品获得好处，也无法使用与修改新产品（但也因为 BSD 许可证的灵活，所以应用也非常广泛）。</li><li>Linux 比 FreeBSD 更成功的关键在于发行时机，Linux Torvalds 在 1991 年发行了 Linux 内核，而完全开放源代码的 386/BSD 直到 1992 年才发行。</li></ul><h2 id="旧博客链接"><a href="#旧博客链接" class="headerlink" title="旧博客链接"></a>旧博客链接</h2><ol><li><a href="http://www.cnblogs.com/hiwangzi/p/7619823.html" target="_blank" rel="noopener">《鸟哥的Linux私房菜》笔记——01. 计算机概论</a></li><li><a href="http://www.cnblogs.com/hiwangzi/p/7619939.html" target="_blank" rel="noopener">《鸟哥的Linux私房菜》笔记——02. 关于Linux</a></li></ol>]]></content>
    
    <summary type="html">
    
      这是阅读《Unix &amp; Linux大学教程》的一篇笔记。
    
    </summary>
    
    
      <category term="Linux" scheme="http://hiwangzi.com/tags/Linux/"/>
    
  </entry>
  
</feed>
